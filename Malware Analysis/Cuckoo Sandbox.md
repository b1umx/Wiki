# Установка Cuckoo Sandbox

## Установка зависимостей
```sh
sudo pacman -S python2 python2-pip python2-setuptools python2-virtualenv libffi openssl libjpeg-turbo zlib swig mongodb postgresql postgresql-utils
sudo su - postgres -c "initdb --locale ru_RU.UTF-8 -E UTF8 -D '/var/lib/postgres/data'"
sudo su - postgres
psql
```

```sql
create database cuckoo_db;
create user cuckoo with password '<password>';
grant all on database cuckoo_db to cuckoo;
\q
```
```sh
exit
cd Downloads
https://github.com/ssdeep-project/ssdeep/releases/download/release-2.14.1/ssdeep-2.14.1.tar.gz
tar xzf ssdeep-2.14.1.tar.gz
cd ssdeep-2.14.1
./configure --prefix=/opt/ssdeep
make
sudo make install
sudo ln -s /opt/ssdeep/include /usr/local/include/ssdeep 
sudo ln -s /opt/ssdeep/lib /usr/local/lib/ssdeep
sudo ln -s /opt/ssdeep/bin/ssdeep /usr/local/bin/ssdeep
```

```sh
sudo useradd -G vboxusers cuckoo
sudo pacman -S tcpdump apparmor
sudo aa-disable /usr/sbin/tcpdump
sudo usermod -a -G pcap cuckoo
sudo chgrp pcap /usr/sbin/tcpdump
sudo setcap cap_net_raw,cap_net_admin=eip /usr/sbin/tcpdump
cd ~/Downloads
wget http://downloads.volatilityfoundation.org/releases/2.6/volatility_2.6_lin64_standalone.zip
unzip volatility_2.6_lin64_standalone.zip
sudo cp -R volatility_2.6_lin64_standalone /opt/volatility
sudo chmod -R 755 /opt/volatility
sudo ln -s /opt/volatility/volatility_2.6_lin64_standalone /usr/local/bin/volatility
```

```sh
sudo mkdir /opt/cuckoo
sudo chown <user>:<group> /opt/cuckoo
cd /opt/cuckoo
virtualenv2 venv
source venv/bin/activate
pip install XenAPI m2crypto
pip install --global-option=build_ext --global-option="-I/usr/local/include/ssdeep" --global-option="-L/usr/local/lib/ssdeep" pydeep
pip install cuckoo
cuckoo -d
```
