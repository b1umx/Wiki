# Реализация классов и их наследования в JavaScript в прототипном стиле

Свойство **prototype** имеет отношение только к конструктору.
Свойство **__proto__** имеет отношение к объекту, создаваемому конструктором.

**__proto__** является ссылкой на прототип объекта. При поиске свойства или метода в объекте сначала просматриваются свойства и методы объекта. Если в объекте они не были найдены, то интерпретатор будет искать их в прототипе (по ссылке **__proto__**).
**prototype** хранит ссылку на прототип, который будет использоваться при создании объекта с помощью конструктора. По факту, интерпретатор свойству **__proto__** вновь созданного объекта присваивает значение **prototype**: `obj.__proto__ = constructor.prototype`

```javascript
/* 
  Конструктор базового класса (если точнее, то псевдокласса). 
  В конструкторе определяются свойства объекта 
*/
function Animal(name) {
  this.name = name;
  this.speed = 0;
}

/*
  Прототип - объект, который используется при конструировании
  новых объектов. Здесь определяем методы. Это нужно для
  оптимизации, чтобы не записывать их в каждый создаваемый
  конструктором объект.
*/
Animal.prototype.run = function(speed) {
  this.speed += speed;
  alert(this.name + ' бежит, скорость ' + this.speed);
};

Animal.prototype.stop = function() {
  this.speed = 0;
  alert(this.name + ' стоит ');
};


/*
  Конструктор класса-потомка. Вызываем внутри конструктор базового
  класса, но применяем его к текущему объекту this. Apply 
  используется вместо call, чтобы можно было передать массив
  аргументов, а не указывать их через запятую 
*/
function Rabbit(name) {
  Animal.apply(this, arguments);
}


/*
  Вручную создаем объект-прототип для Rabbit, указав для него
  базовый прототип Animal.prototype. При вызове у объекта Rabbit
  метода stop, он будет найден в Animal.prototype.
*/
Rabbit.prototype = Object.create(Animal.prototype);
/*
  В прототипе по умолчанию находится ссылка на конструктор. Но мы
  создали прототип вручную, поэтому восстанавливаем эту ссылку.
  Если этого не сделать, то по ссылке 
  (new Rabbit('Кроль')).__proto__.constructor будет располагаться 
  конструктор Animal.
*/
Rabbit.prototype.constructor = Rabbit;


/*
  Определяем методы наследника в его прототипе.
*/
Rabbit.prototype.jump = function() {
  this.speed++;
  alert(this.name + ' прыгает со скоростью ' + this.speed);
};

/*
  Метод базового класса можно переопределить у потомка. Ниже показан
  пример вызова метода базового класса из метода потомка
*/
Rabbit.prototype.run = function(speed) {
  Animal.prototype.run.apply(this, arguments);
  this.jump();
}

/*
  Создание объекта класса Rabbit
*/
let rabbit = new Rabbit('Кроль');
rabbit.run(5);
rabbit.stop();
```

